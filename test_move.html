<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<meta charset="utf-8" />
	
	<!-- Make IE recognise HTML5 elements (for styling - must stay in the head, before elements are used) -->
	<!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	
	<title>Move test</title>
	
	<link rel="icon" type="image/png" href="images/favicon.png" />
	
	<style>
		.test {
			position: absolute;
			left: 1.6667em;
			background-color: red;
			width: 300px;
			height: 100px;
		}
		
		.first_test {
			top: 260px;
		}
		
		.second_test {
			top: 400px;
		}
	</style>

</head>

<body>
	<header>
		<h1>Move test</h1>
		<p>What happens when we bind movestart, move and moveend events to a div?</p>
		<p>Are there any arrors?</p>
		<p>Does text get selected?</p>
		<p>Can you still interact with form elements inside the div?</p>
		<p>Does clicking on a moveable node de-focus a form element? (Not yet implemented)</p>
	</header>
	
	<div class="first_test test">
	</div>
	
	<div class="second_test test">
		<textarea>Textarea</textarea>
		
		<select>
		  <option>blue</option>
		  <option>green</option>
		  <option>red</option>
		</select>
		
		<input value="Input" />
	</div>
	
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
	<script src="js/jquery.event.move.js"></script>
	<script type="text/javascript">
		function logEvent(e){ console.log(e.type, e); }
		jQuery(document)
		.bind('mousedown mouseup click select focus blur', logEvent)
		.ready(function(){
			var start,
					box = jQuery('.test');
			
			// Test setup and teardown with multiple binds and unbinds...
			
			box
			.bind('movestart move moveend', logEvent)
			.unbind('movestart')
			.unbind('move')
			.unbind('moveend')
			
			.bind('movestart move moveend', logEvent)
			.bind('movestart', function(e){
				var elem = jQuery(this);
				
				start = {
					x: parseInt(elem.css('left')),
					y: parseInt(elem.css('top'))
				};
			})
			.bind('move', function(e){
				jQuery(this).css({
					left: start.x + e.deltaX,
					top: start.y + e.deltaY
				})
			});

		});
	</script>
</body>
</html>